direktiv_api: page/v1
type: page
blocks:
  - type: query-provider
    queries:
      - id: user
        url: /ns/demo/user-details
        queryParams: []
    blocks:
      - type: form
        trigger:
          type: button
          label: form
        mutation:
          method: POST
          url: /form/{{this.form.string}}
          queryParams:
            - key: string-input
              value: "{{this.form.string}}"
            - key: textarea
              value: "{{this.form.textarea}}"
            - key: checkbox
              value: "{{this.form.dynamic-checkbox}}"
            - key: number-input
              value: "{{this.form.dynamic-number-input}}"
            - key: dateicker
              value: "{{this.form.dynamic-date}}"
            - key: select
              value: "{{this.form.dynamic-select}}"
            - key: query-provider
              value: "{{query.user.data.status}}"
          requestHeaders:
            - key: string-input
              value: "{{this.form.string}}"
            - key: textarea
              value: "{{this.form.textarea}}"
            - key: checkbox
              value: "{{this.form.dynamic-checkbox}}"
            - key: number-input
              value: "{{this.form.dynamic-number-input}}"
            - key: dateicker
              value: "{{this.form.dynamic-date}}"
            - key: select
              value: "{{this.form.dynamic-select}}"
            - key: query-provider
              value: "{{query.user.data.status}}"
          requestBody:
            - key: string-input
              value:
                type: string
                value: "{{this.form.string}}"
            - key: boolean
              value:
                type: boolean
                value: true
            - key: number
              value:
                type: number
                value: 1
            - key: variable-object
              value:
                type: variable
                value: query.user.data
            - key: variable-boolean
              value:
                type: variable
                value: query.user.data.emailVerified
            - key: variable-number
              value:
                type: variable
                value: query.user.data.accountBalance
        blocks:
          - type: headline
            level: h1
            label: Pre-filled form
          - type: card
            blocks:
              - id: string
                label: string input
                description: ""
                optional: false
                type: form-string-input
                variant: text
                defaultValue: "This data comes from the API ->
                  string:{{query.user.data.status}},
                  number: {{query.user.data.userId}}, boolean:
                  {{query.user.data.emailVerified}}"
              - id: textarea
                label: textarea
                description: ""
                optional: false
                type: form-textarea
                defaultValue: "This data comes from the API ->
                  string:{{query.user.data.status}},
                  number: {{query.user.data.userId}}, boolean:
                  {{query.user.data.emailVerified}}"
          - type: card
            blocks:
              - type: columns
                blocks:
                  - type: column
                    blocks:
                      - id: static-checkbox
                        label: static checkbox
                        description: default values is always checked
                        optional: false
                        type: form-checkbox
                        defaultValue:
                          type: boolean
                          value: true
                      - id: static-number-input
                        label: static number input
                        description: default value is always 3
                        optional: false
                        type: form-number-input
                        defaultValue:
                          type: number
                          value: 3
                      - id: static-date
                        label: static date
                        description: default value is always 2025-12-24
                        optional: false
                        type: form-date-input
                        defaultValue: 2025-12-24T00:00:00.000Z
                      - id: static-select
                        label: static select
                        description: default value is always free
                        optional: false
                        type: form-select
                        values:
                          type: array
                          value:
                            - free
                            - pro
                            - enterprise
                        defaultValue: free
                  - type: column
                    blocks:
                      - id: dynamic-checkbox
                        label: dynamic checkbox
                        description: default value comes from the api
                          ({{query.user.data.emailVerified}})
                        optional: false
                        type: form-checkbox
                        defaultValue:
                          type: variable
                          value: query.user.data.emailVerified
                      - id: dynamic-number-input
                        label: dynamic number input
                        description: default value comes from API ({{query.user.data.accountBalance}})
                        optional: false
                        type: form-number-input
                        defaultValue:
                          type: variable
                          value: query.user.data.accountBalance
                      - id: dynamic-date
                        label: dynamic date
                        description: default value comes from the api
                          ({{query.user.data.membershipStartDate}})
                        optional: false
                        type: form-date-input
                        defaultValue: "{{query.user.data.membershipStartDate}}"
                      - id: dynamic-select
                        label: dynamic select
                        description: default value and values come from API ({{query.user.data.subscriptionPlan}})
                        optional: false
                        type: form-select
                        values:
                          type: variable
                          value: query.user.meta.subscriptionPlanOptions
                        defaultValue: "{{query.user.data.subscriptionPlan}}"
          - type: headline
            level: h2
            label: error cases
          - type: card
            blocks:
              - type: text
                content:
                  These form elements demonstrate various error cases when using a
                  variable that has an invalid type for the specific use case.
              - id: textarea-using-an-object
                label: invalid textarea
                description: This textarea is using an object in the template string
                optional: false
                type: form-textarea
                defaultValue: "{{query.user.data}}"
              - id: checkbox-using-a-string
                label: invalid checkbox
                description: This checkbox is pointing to a string for the default value
                optional: false
                type: form-checkbox
                defaultValue:
                  type: variable
                  value: query.user.data.status
              - id: number-using-string
                label: invalid number input
                description: This number input is pointing to a string for the default value
                optional: false
                type: form-number-input
                defaultValue:
                  type: variable
                  value: query.user.data.status
              - id: select-using-boolean
                label: invalid-select
                description: This select input is pointing to a boolean for the default value
                optional: false
                type: form-select
                values:
                  type: array
                  value:
                    - one
                    - two
                defaultValue: "{{query.user.data}}"
