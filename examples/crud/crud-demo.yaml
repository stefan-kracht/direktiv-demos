direktiv_api: page/v1
type: page
blocks:
  - type: headline
    level: h1
    label: ThunderCorp International
  - type: columns
    blocks:
      - type: column
        blocks:
          - type: image
            src: https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/dream-world/25.svg
            width: 200
            height: 200
      - type: column
        blocks:
          - type: headline
            level: h3
            label: "CEO: Pikachu"
          - type: text
            content:
              Pikachu is the CEO of ThunderCorp International, known for his
              energetic leadership and iconic rise from pop culture mascot to
              business figure. With a shockingly sharp strategy, he leads with
              agility, loyalty, and charm.
          - type: dialog
            trigger:
              type: button
              label: Read more
            blocks:
              - type: text
                content:
                  Under Pikachu's leadership, ThunderCorp has expanded into cutting-edge
                  sectors including sustainable energy, gamified wellness
                  platforms, and AI-driven entertainment. His approach blends
                  instinctive decision-making with deep emotional intelligence,
                  earning him a reputation as both a visionary and a team-first
                  executive. Despite his small stature, Pikachu commands
                  attention in boardrooms worldwide, often communicating through
                  subtle gestures, electrifying presence, and the occasional
                  “Pika” punctuated with purpose. A firm believer in
                  evolution—both personal and organizational—he champions growth
                  through adaptation, partnership, and a relentless commitment
                  to staying one step ahead in an ever-changing landscape.
  - type: query-provider
    queries:
      - id: employees
        url: http://localhost:3333/employees
        queryParams: []
    blocks:
      - type: headline
        level: h1
        label: "{{query.employees.count}} employees"
      - type: table
        data:
          type: loop
          id: person
          data: query.employees.data
          pageSize: 5
        blocks:
          - type: table-actions
            blocks:
              - type: dialog
                trigger:
                  type: button
                  label: create new employee
                blocks:
                  - type: form
                    trigger:
                      type: button
                      label: Create
                    mutation:
                      method: POST
                      url: http://localhost:3333/employees
                      requestBody:
                        - key: name
                          value:
                            type: variable
                            value: this.name
                        - key: age
                          value:
                            type: variable
                            value: this.age
                        - key: isActive
                          value:
                            type: variable
                            value: this.active
                        - key: department
                          value:
                            type: variable
                            value: this.department
                        - key: salary
                          value:
                            type: variable
                            value: this.salary
                    blocks:
                      - id: name
                        label: name
                        description: ""
                        optional: false
                        type: form-string-input
                        variant: text
                        defaultValue: ""
                      - type: columns
                        blocks:
                          - type: column
                            blocks:
                              - id: salary
                                label: salary
                                description: ""
                                optional: false
                                type: form-number-input
                                defaultValue:
                                  type: number
                                  value: 0
                          - type: column
                            blocks:
                              - id: age
                                label: age
                                description: ""
                                optional: false
                                type: form-number-input
                                defaultValue:
                                  type: number
                                  value: 0
                      - id: department
                        label: department
                        description: ""
                        optional: false
                        type: form-select
                        values:
                          type: array
                          value:
                            - engineering
                            - marketing
                            - sales
                            - hr
                        defaultValue: ""
                      - id: active
                        label: active
                        description: This employee is active
                        optional: true
                        type: form-checkbox
                        defaultValue:
                          type: boolean
                          value: false
              - type: dialog
                trigger:
                  type: button
                  label: create random employees
                blocks:
                  - type: form
                    trigger:
                      type: button
                      label: Create entries
                    mutation:
                      method: POST
                      url: http://localhost:3333/actions
                      queryParams: []
                      requestHeaders: []
                      requestBody:
                        - key: action
                          value:
                            type: string
                            value: seed
                        - key: count
                          value:
                            type: variable
                            value: this.count
                    blocks:
                      - type: headline
                        level: h3
                        label: Create random entries
                      - id: count
                        label: Number of entries
                        description: ""
                        optional: false
                        type: form-number-input
                        defaultValue:
                          type: number
                          value: 10
              - type: dialog
                trigger:
                  type: button
                  label: empty database
                blocks:
                  - type: form
                    trigger:
                      type: button
                      label: empy database
                    mutation:
                      method: POST
                      url: http://localhost:3333/actions
                      requestBody:
                        - key: action
                          value:
                            type: string
                            value: clear
                    blocks:
                      - type: headline
                        level: h3
                        label: Empty database
                      - type: text
                        content: Do you want to empty the database?
          - type: row-actions
            blocks:
              - type: dialog
                trigger:
                  type: button
                  label: delete
                blocks:
                  - type: form
                    trigger:
                      type: button
                      label: Delete
                    mutation:
                      method: DELETE
                      url: http://localhost:3333/employees/{{loop.person.id}}
                    blocks:
                      - type: text
                        content: Are you sure you want to delte {{loop.person.name}}?
              - type: dialog
                trigger:
                  type: button
                  label: edit
                blocks:
                  - type: form
                    trigger:
                      type: button
                      label: Update
                    mutation:
                      method: PUT
                      url: http://localhost:3333/employees/{{loop.person.id}}
                      requestBody:
                        - key: name
                          value:
                            type: variable
                            value: this.name
                    blocks:
                      - id: name
                        label: name
                        description: ""
                        optional: false
                        type: form-string-input
                        variant: text
                        defaultValue: "{{loop.person.name}}"
                      - type: query-provider
                        queries: []
                        blocks: []
                      - type: columns
                        blocks:
                          - type: column
                            blocks:
                              - id: salary
                                label: salary
                                description: ""
                                optional: false
                                type: form-number-input
                                defaultValue:
                                  type: number
                                  value: 0
                          - type: column
                            blocks:
                              - id: age
                                label: age
                                description: ""
                                optional: false
                                type: form-number-input
                                defaultValue:
                                  type: number
                                  value: 0
                      - id: department
                        label: department
                        description: ""
                        optional: false
                        type: form-select
                        values:
                          type: array
                          value: []
                        defaultValue: ""
                      - id: active
                        label: active
                        description: This employee is active
                        optional: false
                        type: form-checkbox
                        defaultValue:
                          type: boolean
                          value: false
        columns:
          - type: table-column
            label: name
            content: "{{loop.person.name}}"
          - type: table-column
            label: department
            content: "{{loop.person.department}}"
